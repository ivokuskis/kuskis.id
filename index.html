<!DOCTYPE html>
<html lang="lv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laiks līdz pensijai</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
            background-color: white;
        }
        #counter {
            font-size: 2em;
            color: #333;
        }
        #workdays {
            margin-top: 20px;
            font-size: 1.5em;
            color: #555;
        }
        #motivational-text {
            margin-top: 30px;
            font-size: 1.8em;
            color: #ff4500;
            font-weight: bold;
        }
        #fireworks {
            margin-top: 40px;
            position: relative;
            height: 200px;
            background-color: white;
            overflow: hidden;
        }
        .firework {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: #ff4500;
            border-radius: 50%;
            opacity: 0;
            animation: firework-animation 1.5s ease-out infinite;
        }
        @keyframes firework-animation {
            0% {
                opacity: 1;
                transform: translate(0, 0) scale(1);
            }
            50% {
                opacity: 0.6;
                transform: translate(var(--x), var(--y)) scale(1.5);
            }
            100% {
                opacity: 0;
                transform: translate(var(--x), var(--y)) scale(0);
            }
        }
        #birthdate {
            font-size: 1.5em;
            padding: 10px;
            width: 250px;
            margin-top: 10px;
        }
        #calculate-button {
            margin-top: 15px;
            font-size: 1.2em;
            padding: 10px 20px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        #calculate-button:hover {
            background-color: #218838;
        }
    </style>
</head>
<body>
    <h1>Laiks līdz pensijai</h1>
    <p>Ievadiet savu dzimšanas datumu:</p>
    <input type="date" id="birthdate" value="1971-01-05">
    <button id="calculate-button" onclick="calculatePension()">Skatīt</button>
    <div id="counter"></div>
    <div id="workdays"></div>
    <div id="motivational-text">Strādāt, strādāt un vēlreiz strādāt!</div>
    <div id="fireworks"></div>

    <script>
        // Latvijas valsts svētku dienas
        const publicHolidays = [
            '2025-01-01', '2025-04-06', '2025-04-07', '2025-05-01',
            '2025-05-04', '2025-06-23', '2025-06-24', '2025-11-18',
            '2025-12-24', '2025-12-25', '2025-12-26', '2025-12-31'
        ];

        let interval;

        function isWorkday(date) {
            const day = date.getDay();
            const dateString = date.toISOString().split('T')[0];
            return day !== 0 && day !== 6 && !publicHolidays.includes(dateString);
        }

        function calculatePension() {
            const birthdateInput = document.getElementById("birthdate");
            const birthdate = new Date(birthdateInput.value);
            if (isNaN(birthdate)) {
                alert("Lūdzu ievadiet derīgu dzimšanas datumu!");
                return;
            }

            const pensionAge = 65;
            const pensionDate = new Date(birthdate);
            pensionDate.setFullYear(pensionDate.getFullYear() + pensionAge);

            // Notīrām vecos aprēķinus un apturam intervālus
            clearInterval(interval);
            document.getElementById("counter").innerHTML = "";
            document.getElementById("workdays").innerHTML = "";
            document.getElementById("fireworks").innerHTML = "";

            function updateCounter() {
                const now = new Date();
                const timeLeft = pensionDate - now;

                if (timeLeft <= 0) {
                    document.getElementById("counter").innerText = "Jūs jau esat pensijā!";
                    document.getElementById("workdays").innerText = "";
                    clearInterval(interval);
                    return;
                }

                const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeLeft / (1000 * 60 * 60)) % 24);
                const minutes = Math.floor((timeLeft / (1000 * 60)) % 60);
                const seconds = Math.floor((timeLeft / 1000) % 60);

                document.getElementById("counter").innerText = 
                    `Atlikušais laiks līdz pensijai: ${days} dienas, ${hours} stundas, ${minutes} minūtes, ${seconds} sekundes`;
            }

            function calculateWorkdays() {
                let workdays = 0;
                let currentDate = new Date();
                while (currentDate <= pensionDate) {
                    if (isWorkday(currentDate)) {
                        workdays++;
                    }
                    currentDate.setDate(currentDate.getDate() + 1);
                }
                document.getElementById("workdays").innerText = `Darba dienu skaits līdz pensijai: ${workdays}`;
            }

            updateCounter();
            calculateWorkdays();
            interval = setInterval(updateCounter, 1000);

            createFireworks();
        }

        function createFireworks() {
            const fireworksContainer = document.getElementById('fireworks');
            for (let i = 0; i < 50; i++) {
                const firework = document.createElement('div');
                firework.className = 'firework';
                firework.style.setProperty('--x', `${Math.random() * 200 - 100}%`);
                firework.style.setProperty('--y', `${Math.random() * 200 - 100}%`);
                firework.style.left = `${Math.random() * 100}%`;
                firework.style.top = `${Math.random() * 100}%`;
                fireworksContainer.appendChild(firework);
            }
        }
    </script>
</body>
</html>
