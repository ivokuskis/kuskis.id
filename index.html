<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laiks līdz pensijai</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f3f9ff;
            color: #333;
        }
        input {
            padding: 10px;
            font-size: 16px;
            width: 250px;
            margin: 10px;
        }
        .progress-bar {
            width: 80%;
            background-color: #e0e0e0;
            border-radius: 25px;
            margin: 20px auto;
            position: relative;
            height: 30px;
        }
        .progress-bar-fill {
            height: 100%;
            background-color: #76c7c0;
            border-radius: 25px;
            width: 0%;
            text-align: center;
            line-height: 30px;
            color: white;
            font-weight: bold;
            transition: width 1s ease-in-out;
        }
        .clock {
            font-size: 24px;
            margin: 20px 0;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>Laiks līdz pensijai</h1>
    <label for="birthDate">Ievadi savu dzimšanas datumu (MM/DD/GGGG):</label>
    <input type="date" id="birthDate" />
    <button onclick="calculateRetirement()">Skatīt</button>

    <div id="results">
        <h2 id="timeRemaining"></h2>
        <div class="progress-bar">
            <div class="progress-bar-fill" id="progressFill">0%</div>
        </div>
        <div class="clock" id="clock"></div>
    </div>

    <script>
        function calculateRetirement() {
            const birthDateInput = document.getElementById("birthDate").value;
            const birthDate = new Date(birthDateInput);
            const retirementAge = 65;
            const currentDate = new Date();

            // Check if input is valid
            if (!birthDateInput || birthDate > currentDate) {
                alert("Lūdzu ievadi derīgu dzimšanas datumu!");
                return;
            }

            const retirementDate = new Date(
                birthDate.getFullYear() + retirementAge,
                birthDate.getMonth(),
                birthDate.getDate()
            );

            const totalLifetime = retirementDate - birthDate;
            const timeLived = currentDate - birthDate;
            const timeRemaining = retirementDate - currentDate;

            // Update progress bar
            const percentageLived = Math.min((timeLived / totalLifetime) * 100, 100).toFixed(2);
            const progressFill = document.getElementById("progressFill");
            progressFill.style.width = percentageLived + "%";
            progressFill.textContent = percentageLived + "%";

            // Update time remaining
            const daysRemaining = Math.floor(timeRemaining / (1000 * 60 * 60 * 24));
            const hoursRemaining = Math.floor((timeRemaining / (1000 * 60 * 60)) % 24);
            const minutesRemaining = Math.floor((timeRemaining / (1000 * 60)) % 60);
            const secondsRemaining = Math.floor((timeRemaining / 1000) % 60);

            document.getElementById("timeRemaining").textContent =
                `Līdz pensijai atlicis: ${daysRemaining} dienas, ${hoursRemaining} stundas, ${minutesRemaining} minūtes, ${secondsRemaining} sekundes.`;

            // Update clock dynamically
            function updateClock() {
                const now = new Date();
                const updatedTimeRemaining = retirementDate - now;

                const seconds = Math.floor((updatedTimeRemaining / 1000) % 60);
                const minutes = Math.floor((updatedTimeRemaining / (1000 * 60)) % 60);
                const hours = Math.floor((updatedTimeRemaining / (1000 * 60 * 60)) % 24);

                document.getElementById("clock").textContent =
                    `Sekundes līdz pensijai: ${hours}:${minutes}:${seconds}`;
            }

            setInterval(updateClock, 1000);
        }
    </script>
</body>
</html>
